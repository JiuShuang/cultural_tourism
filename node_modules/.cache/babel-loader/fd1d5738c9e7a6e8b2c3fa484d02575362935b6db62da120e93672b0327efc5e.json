{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\nvar vector = require(\"zrender/lib/core/vector\");\nvar symbolUtil = require(\"../../util/symbol\");\nvar LinePath = require(\"./LinePath\");\nvar graphic = require(\"../../util/graphic\");\nvar _number = require(\"../../util/number\");\nvar round = _number.round;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/chart/helper/Line\n */\nvar SYMBOL_CATEGORIES = ['fromSymbol', 'toSymbol'];\nfunction makeSymbolTypeKey(symbolCategory) {\n  return '_' + symbolCategory + 'Type';\n}\n/**\n * @inner\n */\n\nfunction createSymbol(name, lineData, idx) {\n  var color = lineData.getItemVisual(idx, 'color');\n  var symbolType = lineData.getItemVisual(idx, name);\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  if (!symbolType || symbolType === 'none') {\n    return;\n  }\n  if (!zrUtil.isArray(symbolSize)) {\n    symbolSize = [symbolSize, symbolSize];\n  }\n  var symbolPath = symbolUtil.createSymbol(symbolType, -symbolSize[0] / 2, -symbolSize[1] / 2, symbolSize[0], symbolSize[1], color);\n  symbolPath.name = name;\n  return symbolPath;\n}\nfunction createLine(points) {\n  var line = new LinePath({\n    name: 'line',\n    subPixelOptimize: true\n  });\n  setLinePoints(line.shape, points);\n  return line;\n}\nfunction setLinePoints(targetShape, points) {\n  targetShape.x1 = points[0][0];\n  targetShape.y1 = points[0][1];\n  targetShape.x2 = points[1][0];\n  targetShape.y2 = points[1][1];\n  targetShape.percent = 1;\n  var cp1 = points[2];\n  if (cp1) {\n    targetShape.cpx1 = cp1[0];\n    targetShape.cpy1 = cp1[1];\n  } else {\n    targetShape.cpx1 = NaN;\n    targetShape.cpy1 = NaN;\n  }\n}\nfunction updateSymbolAndLabelBeforeLineUpdate() {\n  var lineGroup = this;\n  var symbolFrom = lineGroup.childOfName('fromSymbol');\n  var symbolTo = lineGroup.childOfName('toSymbol');\n  var label = lineGroup.childOfName('label'); // Quick reject\n\n  if (!symbolFrom && !symbolTo && label.ignore) {\n    return;\n  }\n  var invScale = 1;\n  var parentNode = this.parent;\n  while (parentNode) {\n    if (parentNode.scale) {\n      invScale /= parentNode.scale[0];\n    }\n    parentNode = parentNode.parent;\n  }\n  var line = lineGroup.childOfName('line'); // If line not changed\n  // FIXME Parent scale changed\n\n  if (!this.__dirty && !line.__dirty) {\n    return;\n  }\n  var percent = line.shape.percent;\n  var fromPos = line.pointAt(0);\n  var toPos = line.pointAt(percent);\n  var d = vector.sub([], toPos, fromPos);\n  vector.normalize(d, d);\n  if (symbolFrom) {\n    symbolFrom.attr('position', fromPos);\n    var tangent = line.tangentAt(0);\n    symbolFrom.attr('rotation', Math.PI / 2 - Math.atan2(tangent[1], tangent[0]));\n    symbolFrom.attr('scale', [invScale * percent, invScale * percent]);\n  }\n  if (symbolTo) {\n    symbolTo.attr('position', toPos);\n    var tangent = line.tangentAt(1);\n    symbolTo.attr('rotation', -Math.PI / 2 - Math.atan2(tangent[1], tangent[0]));\n    symbolTo.attr('scale', [invScale * percent, invScale * percent]);\n  }\n  if (!label.ignore) {\n    label.attr('position', toPos);\n    var textPosition;\n    var textAlign;\n    var textVerticalAlign;\n    var textOrigin;\n    var distance = label.__labelDistance;\n    var distanceX = distance[0] * invScale;\n    var distanceY = distance[1] * invScale;\n    var halfPercent = percent / 2;\n    var tangent = line.tangentAt(halfPercent);\n    var n = [tangent[1], -tangent[0]];\n    var cp = line.pointAt(halfPercent);\n    if (n[1] > 0) {\n      n[0] = -n[0];\n      n[1] = -n[1];\n    }\n    var dir = tangent[0] < 0 ? -1 : 1;\n    if (label.__position !== 'start' && label.__position !== 'end') {\n      var rotation = -Math.atan2(tangent[1], tangent[0]);\n      if (toPos[0] < fromPos[0]) {\n        rotation = Math.PI + rotation;\n      }\n      label.attr('rotation', rotation);\n    }\n    var dy;\n    switch (label.__position) {\n      case 'insideStartTop':\n      case 'insideMiddleTop':\n      case 'insideEndTop':\n      case 'middle':\n        dy = -distanceY;\n        textVerticalAlign = 'bottom';\n        break;\n      case 'insideStartBottom':\n      case 'insideMiddleBottom':\n      case 'insideEndBottom':\n        dy = distanceY;\n        textVerticalAlign = 'top';\n        break;\n      default:\n        dy = 0;\n        textVerticalAlign = 'middle';\n    }\n    switch (label.__position) {\n      case 'end':\n        textPosition = [d[0] * distanceX + toPos[0], d[1] * distanceY + toPos[1]];\n        textAlign = d[0] > 0.8 ? 'left' : d[0] < -0.8 ? 'right' : 'center';\n        textVerticalAlign = d[1] > 0.8 ? 'top' : d[1] < -0.8 ? 'bottom' : 'middle';\n        break;\n      case 'start':\n        textPosition = [-d[0] * distanceX + fromPos[0], -d[1] * distanceY + fromPos[1]];\n        textAlign = d[0] > 0.8 ? 'right' : d[0] < -0.8 ? 'left' : 'center';\n        textVerticalAlign = d[1] > 0.8 ? 'bottom' : d[1] < -0.8 ? 'top' : 'middle';\n        break;\n      case 'insideStartTop':\n      case 'insideStart':\n      case 'insideStartBottom':\n        textPosition = [distanceX * dir + fromPos[0], fromPos[1] + dy];\n        textAlign = tangent[0] < 0 ? 'right' : 'left';\n        textOrigin = [-distanceX * dir, -dy];\n        break;\n      case 'insideMiddleTop':\n      case 'insideMiddle':\n      case 'insideMiddleBottom':\n      case 'middle':\n        textPosition = [cp[0], cp[1] + dy];\n        textAlign = 'center';\n        textOrigin = [0, -dy];\n        break;\n      case 'insideEndTop':\n      case 'insideEnd':\n      case 'insideEndBottom':\n        textPosition = [-distanceX * dir + toPos[0], toPos[1] + dy];\n        textAlign = tangent[0] >= 0 ? 'right' : 'left';\n        textOrigin = [distanceX * dir, -dy];\n        break;\n    }\n    label.attr({\n      style: {\n        // Use the user specified text align and baseline first\n        textVerticalAlign: label.__verticalAlign || textVerticalAlign,\n        textAlign: label.__textAlign || textAlign\n      },\n      position: textPosition,\n      scale: [invScale, invScale],\n      origin: textOrigin\n    });\n  }\n}\n/**\n * @constructor\n * @extends {module:zrender/graphic/Group}\n * @alias {module:echarts/chart/helper/Line}\n */\n\nfunction Line(lineData, idx, seriesScope) {\n  graphic.Group.call(this);\n  this._createLine(lineData, idx, seriesScope);\n}\nvar lineProto = Line.prototype; // Update symbol position and rotation\n\nlineProto.beforeUpdate = updateSymbolAndLabelBeforeLineUpdate;\nlineProto._createLine = function (lineData, idx, seriesScope) {\n  var seriesModel = lineData.hostModel;\n  var linePoints = lineData.getItemLayout(idx);\n  var line = createLine(linePoints);\n  line.shape.percent = 0;\n  graphic.initProps(line, {\n    shape: {\n      percent: 1\n    }\n  }, seriesModel, idx);\n  this.add(line);\n  var label = new graphic.Text({\n    name: 'label',\n    // FIXME\n    // Temporary solution for `focusNodeAdjacency`.\n    // line label do not use the opacity of lineStyle.\n    lineLabelOriginalOpacity: 1\n  });\n  this.add(label);\n  zrUtil.each(SYMBOL_CATEGORIES, function (symbolCategory) {\n    var symbol = createSymbol(symbolCategory, lineData, idx); // symbols must added after line to make sure\n    // it will be updated after line#update.\n    // Or symbol position and rotation update in line#beforeUpdate will be one frame slow\n\n    this.add(symbol);\n    this[makeSymbolTypeKey(symbolCategory)] = lineData.getItemVisual(idx, symbolCategory);\n  }, this);\n  this._updateCommonStl(lineData, idx, seriesScope);\n};\nlineProto.updateData = function (lineData, idx, seriesScope) {\n  var seriesModel = lineData.hostModel;\n  var line = this.childOfName('line');\n  var linePoints = lineData.getItemLayout(idx);\n  var target = {\n    shape: {}\n  };\n  setLinePoints(target.shape, linePoints);\n  graphic.updateProps(line, target, seriesModel, idx);\n  zrUtil.each(SYMBOL_CATEGORIES, function (symbolCategory) {\n    var symbolType = lineData.getItemVisual(idx, symbolCategory);\n    var key = makeSymbolTypeKey(symbolCategory); // Symbol changed\n\n    if (this[key] !== symbolType) {\n      this.remove(this.childOfName(symbolCategory));\n      var symbol = createSymbol(symbolCategory, lineData, idx);\n      this.add(symbol);\n    }\n    this[key] = symbolType;\n  }, this);\n  this._updateCommonStl(lineData, idx, seriesScope);\n};\nlineProto._updateCommonStl = function (lineData, idx, seriesScope) {\n  var seriesModel = lineData.hostModel;\n  var line = this.childOfName('line');\n  var lineStyle = seriesScope && seriesScope.lineStyle;\n  var hoverLineStyle = seriesScope && seriesScope.hoverLineStyle;\n  var labelModel = seriesScope && seriesScope.labelModel;\n  var hoverLabelModel = seriesScope && seriesScope.hoverLabelModel; // Optimization for large dataset\n\n  if (!seriesScope || lineData.hasItemOption) {\n    var itemModel = lineData.getItemModel(idx);\n    lineStyle = itemModel.getModel('lineStyle').getLineStyle();\n    hoverLineStyle = itemModel.getModel('emphasis.lineStyle').getLineStyle();\n    labelModel = itemModel.getModel('label');\n    hoverLabelModel = itemModel.getModel('emphasis.label');\n  }\n  var visualColor = lineData.getItemVisual(idx, 'color');\n  var visualOpacity = zrUtil.retrieve3(lineData.getItemVisual(idx, 'opacity'), lineStyle.opacity, 1);\n  line.useStyle(zrUtil.defaults({\n    strokeNoScale: true,\n    fill: 'none',\n    stroke: visualColor,\n    opacity: visualOpacity\n  }, lineStyle));\n  line.hoverStyle = hoverLineStyle; // Update symbol\n\n  zrUtil.each(SYMBOL_CATEGORIES, function (symbolCategory) {\n    var symbol = this.childOfName(symbolCategory);\n    if (symbol) {\n      symbol.setColor(visualColor);\n      symbol.setStyle({\n        opacity: visualOpacity\n      });\n    }\n  }, this);\n  var showLabel = labelModel.getShallow('show');\n  var hoverShowLabel = hoverLabelModel.getShallow('show');\n  var label = this.childOfName('label');\n  var defaultLabelColor;\n  var baseText; // FIXME: the logic below probably should be merged to `graphic.setLabelStyle`.\n\n  if (showLabel || hoverShowLabel) {\n    defaultLabelColor = visualColor || '#000';\n    baseText = seriesModel.getFormattedLabel(idx, 'normal', lineData.dataType);\n    if (baseText == null) {\n      var rawVal = seriesModel.getRawValue(idx);\n      baseText = rawVal == null ? lineData.getName(idx) : isFinite(rawVal) ? round(rawVal) : rawVal;\n    }\n  }\n  var normalText = showLabel ? baseText : null;\n  var emphasisText = hoverShowLabel ? zrUtil.retrieve2(seriesModel.getFormattedLabel(idx, 'emphasis', lineData.dataType), baseText) : null;\n  var labelStyle = label.style; // Always set `textStyle` even if `normalStyle.text` is null, because default\n  // values have to be set on `normalStyle`.\n\n  if (normalText != null || emphasisText != null) {\n    graphic.setTextStyle(label.style, labelModel, {\n      text: normalText\n    }, {\n      autoColor: defaultLabelColor\n    });\n    label.__textAlign = labelStyle.textAlign;\n    label.__verticalAlign = labelStyle.textVerticalAlign; // 'start', 'middle', 'end'\n\n    label.__position = labelModel.get('position') || 'middle';\n    var distance = labelModel.get('distance');\n    if (!zrUtil.isArray(distance)) {\n      distance = [distance, distance];\n    }\n    label.__labelDistance = distance;\n  }\n  if (emphasisText != null) {\n    // Only these properties supported in this emphasis style here.\n    label.hoverStyle = {\n      text: emphasisText,\n      textFill: hoverLabelModel.getTextColor(true),\n      // For merging hover style to normal style, do not use\n      // `hoverLabelModel.getFont()` here.\n      fontStyle: hoverLabelModel.getShallow('fontStyle'),\n      fontWeight: hoverLabelModel.getShallow('fontWeight'),\n      fontSize: hoverLabelModel.getShallow('fontSize'),\n      fontFamily: hoverLabelModel.getShallow('fontFamily')\n    };\n  } else {\n    label.hoverStyle = {\n      text: null\n    };\n  }\n  label.ignore = !showLabel && !hoverShowLabel;\n  graphic.setHoverStyle(this);\n};\nlineProto.highlight = function () {\n  this.trigger('emphasis');\n};\nlineProto.downplay = function () {\n  this.trigger('normal');\n};\nlineProto.updateLayout = function (lineData, idx) {\n  this.setLinePoints(lineData.getItemLayout(idx));\n};\nlineProto.setLinePoints = function (points) {\n  var linePath = this.childOfName('line');\n  setLinePoints(linePath.shape, points);\n  linePath.dirty();\n};\nzrUtil.inherits(Line, graphic.Group);\nvar _default = Line;\nmodule.exports = _default;","map":{"version":3,"names":["zrUtil","require","vector","symbolUtil","LinePath","graphic","_number","round","SYMBOL_CATEGORIES","makeSymbolTypeKey","symbolCategory","createSymbol","name","lineData","idx","color","getItemVisual","symbolType","symbolSize","isArray","symbolPath","createLine","points","line","subPixelOptimize","setLinePoints","shape","targetShape","x1","y1","x2","y2","percent","cp1","cpx1","cpy1","NaN","updateSymbolAndLabelBeforeLineUpdate","lineGroup","symbolFrom","childOfName","symbolTo","label","ignore","invScale","parentNode","parent","scale","__dirty","fromPos","pointAt","toPos","d","sub","normalize","attr","tangent","tangentAt","Math","PI","atan2","textPosition","textAlign","textVerticalAlign","textOrigin","distance","__labelDistance","distanceX","distanceY","halfPercent","n","cp","dir","__position","rotation","dy","style","__verticalAlign","__textAlign","position","origin","Line","seriesScope","Group","call","_createLine","lineProto","prototype","beforeUpdate","seriesModel","hostModel","linePoints","getItemLayout","initProps","add","Text","lineLabelOriginalOpacity","each","symbol","_updateCommonStl","updateData","target","updateProps","key","remove","lineStyle","hoverLineStyle","labelModel","hoverLabelModel","hasItemOption","itemModel","getItemModel","getModel","getLineStyle","visualColor","visualOpacity","retrieve3","opacity","useStyle","defaults","strokeNoScale","fill","stroke","hoverStyle","setColor","setStyle","showLabel","getShallow","hoverShowLabel","defaultLabelColor","baseText","getFormattedLabel","dataType","rawVal","getRawValue","getName","isFinite","normalText","emphasisText","retrieve2","labelStyle","setTextStyle","text","autoColor","get","textFill","getTextColor","fontStyle","fontWeight","fontSize","fontFamily","setHoverStyle","highlight","trigger","downplay","updateLayout","linePath","dirty","inherits","_default","module","exports"],"sources":["D:/Study/VueWork/cultural_tourism/node_modules/echarts/lib/chart/helper/Line.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar vector = require(\"zrender/lib/core/vector\");\n\nvar symbolUtil = require(\"../../util/symbol\");\n\nvar LinePath = require(\"./LinePath\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _number = require(\"../../util/number\");\n\nvar round = _number.round;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/chart/helper/Line\n */\nvar SYMBOL_CATEGORIES = ['fromSymbol', 'toSymbol'];\n\nfunction makeSymbolTypeKey(symbolCategory) {\n  return '_' + symbolCategory + 'Type';\n}\n/**\n * @inner\n */\n\n\nfunction createSymbol(name, lineData, idx) {\n  var color = lineData.getItemVisual(idx, 'color');\n  var symbolType = lineData.getItemVisual(idx, name);\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n\n  if (!symbolType || symbolType === 'none') {\n    return;\n  }\n\n  if (!zrUtil.isArray(symbolSize)) {\n    symbolSize = [symbolSize, symbolSize];\n  }\n\n  var symbolPath = symbolUtil.createSymbol(symbolType, -symbolSize[0] / 2, -symbolSize[1] / 2, symbolSize[0], symbolSize[1], color);\n  symbolPath.name = name;\n  return symbolPath;\n}\n\nfunction createLine(points) {\n  var line = new LinePath({\n    name: 'line',\n    subPixelOptimize: true\n  });\n  setLinePoints(line.shape, points);\n  return line;\n}\n\nfunction setLinePoints(targetShape, points) {\n  targetShape.x1 = points[0][0];\n  targetShape.y1 = points[0][1];\n  targetShape.x2 = points[1][0];\n  targetShape.y2 = points[1][1];\n  targetShape.percent = 1;\n  var cp1 = points[2];\n\n  if (cp1) {\n    targetShape.cpx1 = cp1[0];\n    targetShape.cpy1 = cp1[1];\n  } else {\n    targetShape.cpx1 = NaN;\n    targetShape.cpy1 = NaN;\n  }\n}\n\nfunction updateSymbolAndLabelBeforeLineUpdate() {\n  var lineGroup = this;\n  var symbolFrom = lineGroup.childOfName('fromSymbol');\n  var symbolTo = lineGroup.childOfName('toSymbol');\n  var label = lineGroup.childOfName('label'); // Quick reject\n\n  if (!symbolFrom && !symbolTo && label.ignore) {\n    return;\n  }\n\n  var invScale = 1;\n  var parentNode = this.parent;\n\n  while (parentNode) {\n    if (parentNode.scale) {\n      invScale /= parentNode.scale[0];\n    }\n\n    parentNode = parentNode.parent;\n  }\n\n  var line = lineGroup.childOfName('line'); // If line not changed\n  // FIXME Parent scale changed\n\n  if (!this.__dirty && !line.__dirty) {\n    return;\n  }\n\n  var percent = line.shape.percent;\n  var fromPos = line.pointAt(0);\n  var toPos = line.pointAt(percent);\n  var d = vector.sub([], toPos, fromPos);\n  vector.normalize(d, d);\n\n  if (symbolFrom) {\n    symbolFrom.attr('position', fromPos);\n    var tangent = line.tangentAt(0);\n    symbolFrom.attr('rotation', Math.PI / 2 - Math.atan2(tangent[1], tangent[0]));\n    symbolFrom.attr('scale', [invScale * percent, invScale * percent]);\n  }\n\n  if (symbolTo) {\n    symbolTo.attr('position', toPos);\n    var tangent = line.tangentAt(1);\n    symbolTo.attr('rotation', -Math.PI / 2 - Math.atan2(tangent[1], tangent[0]));\n    symbolTo.attr('scale', [invScale * percent, invScale * percent]);\n  }\n\n  if (!label.ignore) {\n    label.attr('position', toPos);\n    var textPosition;\n    var textAlign;\n    var textVerticalAlign;\n    var textOrigin;\n    var distance = label.__labelDistance;\n    var distanceX = distance[0] * invScale;\n    var distanceY = distance[1] * invScale;\n    var halfPercent = percent / 2;\n    var tangent = line.tangentAt(halfPercent);\n    var n = [tangent[1], -tangent[0]];\n    var cp = line.pointAt(halfPercent);\n\n    if (n[1] > 0) {\n      n[0] = -n[0];\n      n[1] = -n[1];\n    }\n\n    var dir = tangent[0] < 0 ? -1 : 1;\n\n    if (label.__position !== 'start' && label.__position !== 'end') {\n      var rotation = -Math.atan2(tangent[1], tangent[0]);\n\n      if (toPos[0] < fromPos[0]) {\n        rotation = Math.PI + rotation;\n      }\n\n      label.attr('rotation', rotation);\n    }\n\n    var dy;\n\n    switch (label.__position) {\n      case 'insideStartTop':\n      case 'insideMiddleTop':\n      case 'insideEndTop':\n      case 'middle':\n        dy = -distanceY;\n        textVerticalAlign = 'bottom';\n        break;\n\n      case 'insideStartBottom':\n      case 'insideMiddleBottom':\n      case 'insideEndBottom':\n        dy = distanceY;\n        textVerticalAlign = 'top';\n        break;\n\n      default:\n        dy = 0;\n        textVerticalAlign = 'middle';\n    }\n\n    switch (label.__position) {\n      case 'end':\n        textPosition = [d[0] * distanceX + toPos[0], d[1] * distanceY + toPos[1]];\n        textAlign = d[0] > 0.8 ? 'left' : d[0] < -0.8 ? 'right' : 'center';\n        textVerticalAlign = d[1] > 0.8 ? 'top' : d[1] < -0.8 ? 'bottom' : 'middle';\n        break;\n\n      case 'start':\n        textPosition = [-d[0] * distanceX + fromPos[0], -d[1] * distanceY + fromPos[1]];\n        textAlign = d[0] > 0.8 ? 'right' : d[0] < -0.8 ? 'left' : 'center';\n        textVerticalAlign = d[1] > 0.8 ? 'bottom' : d[1] < -0.8 ? 'top' : 'middle';\n        break;\n\n      case 'insideStartTop':\n      case 'insideStart':\n      case 'insideStartBottom':\n        textPosition = [distanceX * dir + fromPos[0], fromPos[1] + dy];\n        textAlign = tangent[0] < 0 ? 'right' : 'left';\n        textOrigin = [-distanceX * dir, -dy];\n        break;\n\n      case 'insideMiddleTop':\n      case 'insideMiddle':\n      case 'insideMiddleBottom':\n      case 'middle':\n        textPosition = [cp[0], cp[1] + dy];\n        textAlign = 'center';\n        textOrigin = [0, -dy];\n        break;\n\n      case 'insideEndTop':\n      case 'insideEnd':\n      case 'insideEndBottom':\n        textPosition = [-distanceX * dir + toPos[0], toPos[1] + dy];\n        textAlign = tangent[0] >= 0 ? 'right' : 'left';\n        textOrigin = [distanceX * dir, -dy];\n        break;\n    }\n\n    label.attr({\n      style: {\n        // Use the user specified text align and baseline first\n        textVerticalAlign: label.__verticalAlign || textVerticalAlign,\n        textAlign: label.__textAlign || textAlign\n      },\n      position: textPosition,\n      scale: [invScale, invScale],\n      origin: textOrigin\n    });\n  }\n}\n/**\n * @constructor\n * @extends {module:zrender/graphic/Group}\n * @alias {module:echarts/chart/helper/Line}\n */\n\n\nfunction Line(lineData, idx, seriesScope) {\n  graphic.Group.call(this);\n\n  this._createLine(lineData, idx, seriesScope);\n}\n\nvar lineProto = Line.prototype; // Update symbol position and rotation\n\nlineProto.beforeUpdate = updateSymbolAndLabelBeforeLineUpdate;\n\nlineProto._createLine = function (lineData, idx, seriesScope) {\n  var seriesModel = lineData.hostModel;\n  var linePoints = lineData.getItemLayout(idx);\n  var line = createLine(linePoints);\n  line.shape.percent = 0;\n  graphic.initProps(line, {\n    shape: {\n      percent: 1\n    }\n  }, seriesModel, idx);\n  this.add(line);\n  var label = new graphic.Text({\n    name: 'label',\n    // FIXME\n    // Temporary solution for `focusNodeAdjacency`.\n    // line label do not use the opacity of lineStyle.\n    lineLabelOriginalOpacity: 1\n  });\n  this.add(label);\n  zrUtil.each(SYMBOL_CATEGORIES, function (symbolCategory) {\n    var symbol = createSymbol(symbolCategory, lineData, idx); // symbols must added after line to make sure\n    // it will be updated after line#update.\n    // Or symbol position and rotation update in line#beforeUpdate will be one frame slow\n\n    this.add(symbol);\n    this[makeSymbolTypeKey(symbolCategory)] = lineData.getItemVisual(idx, symbolCategory);\n  }, this);\n\n  this._updateCommonStl(lineData, idx, seriesScope);\n};\n\nlineProto.updateData = function (lineData, idx, seriesScope) {\n  var seriesModel = lineData.hostModel;\n  var line = this.childOfName('line');\n  var linePoints = lineData.getItemLayout(idx);\n  var target = {\n    shape: {}\n  };\n  setLinePoints(target.shape, linePoints);\n  graphic.updateProps(line, target, seriesModel, idx);\n  zrUtil.each(SYMBOL_CATEGORIES, function (symbolCategory) {\n    var symbolType = lineData.getItemVisual(idx, symbolCategory);\n    var key = makeSymbolTypeKey(symbolCategory); // Symbol changed\n\n    if (this[key] !== symbolType) {\n      this.remove(this.childOfName(symbolCategory));\n      var symbol = createSymbol(symbolCategory, lineData, idx);\n      this.add(symbol);\n    }\n\n    this[key] = symbolType;\n  }, this);\n\n  this._updateCommonStl(lineData, idx, seriesScope);\n};\n\nlineProto._updateCommonStl = function (lineData, idx, seriesScope) {\n  var seriesModel = lineData.hostModel;\n  var line = this.childOfName('line');\n  var lineStyle = seriesScope && seriesScope.lineStyle;\n  var hoverLineStyle = seriesScope && seriesScope.hoverLineStyle;\n  var labelModel = seriesScope && seriesScope.labelModel;\n  var hoverLabelModel = seriesScope && seriesScope.hoverLabelModel; // Optimization for large dataset\n\n  if (!seriesScope || lineData.hasItemOption) {\n    var itemModel = lineData.getItemModel(idx);\n    lineStyle = itemModel.getModel('lineStyle').getLineStyle();\n    hoverLineStyle = itemModel.getModel('emphasis.lineStyle').getLineStyle();\n    labelModel = itemModel.getModel('label');\n    hoverLabelModel = itemModel.getModel('emphasis.label');\n  }\n\n  var visualColor = lineData.getItemVisual(idx, 'color');\n  var visualOpacity = zrUtil.retrieve3(lineData.getItemVisual(idx, 'opacity'), lineStyle.opacity, 1);\n  line.useStyle(zrUtil.defaults({\n    strokeNoScale: true,\n    fill: 'none',\n    stroke: visualColor,\n    opacity: visualOpacity\n  }, lineStyle));\n  line.hoverStyle = hoverLineStyle; // Update symbol\n\n  zrUtil.each(SYMBOL_CATEGORIES, function (symbolCategory) {\n    var symbol = this.childOfName(symbolCategory);\n\n    if (symbol) {\n      symbol.setColor(visualColor);\n      symbol.setStyle({\n        opacity: visualOpacity\n      });\n    }\n  }, this);\n  var showLabel = labelModel.getShallow('show');\n  var hoverShowLabel = hoverLabelModel.getShallow('show');\n  var label = this.childOfName('label');\n  var defaultLabelColor;\n  var baseText; // FIXME: the logic below probably should be merged to `graphic.setLabelStyle`.\n\n  if (showLabel || hoverShowLabel) {\n    defaultLabelColor = visualColor || '#000';\n    baseText = seriesModel.getFormattedLabel(idx, 'normal', lineData.dataType);\n\n    if (baseText == null) {\n      var rawVal = seriesModel.getRawValue(idx);\n      baseText = rawVal == null ? lineData.getName(idx) : isFinite(rawVal) ? round(rawVal) : rawVal;\n    }\n  }\n\n  var normalText = showLabel ? baseText : null;\n  var emphasisText = hoverShowLabel ? zrUtil.retrieve2(seriesModel.getFormattedLabel(idx, 'emphasis', lineData.dataType), baseText) : null;\n  var labelStyle = label.style; // Always set `textStyle` even if `normalStyle.text` is null, because default\n  // values have to be set on `normalStyle`.\n\n  if (normalText != null || emphasisText != null) {\n    graphic.setTextStyle(label.style, labelModel, {\n      text: normalText\n    }, {\n      autoColor: defaultLabelColor\n    });\n    label.__textAlign = labelStyle.textAlign;\n    label.__verticalAlign = labelStyle.textVerticalAlign; // 'start', 'middle', 'end'\n\n    label.__position = labelModel.get('position') || 'middle';\n    var distance = labelModel.get('distance');\n\n    if (!zrUtil.isArray(distance)) {\n      distance = [distance, distance];\n    }\n\n    label.__labelDistance = distance;\n  }\n\n  if (emphasisText != null) {\n    // Only these properties supported in this emphasis style here.\n    label.hoverStyle = {\n      text: emphasisText,\n      textFill: hoverLabelModel.getTextColor(true),\n      // For merging hover style to normal style, do not use\n      // `hoverLabelModel.getFont()` here.\n      fontStyle: hoverLabelModel.getShallow('fontStyle'),\n      fontWeight: hoverLabelModel.getShallow('fontWeight'),\n      fontSize: hoverLabelModel.getShallow('fontSize'),\n      fontFamily: hoverLabelModel.getShallow('fontFamily')\n    };\n  } else {\n    label.hoverStyle = {\n      text: null\n    };\n  }\n\n  label.ignore = !showLabel && !hoverShowLabel;\n  graphic.setHoverStyle(this);\n};\n\nlineProto.highlight = function () {\n  this.trigger('emphasis');\n};\n\nlineProto.downplay = function () {\n  this.trigger('normal');\n};\n\nlineProto.updateLayout = function (lineData, idx) {\n  this.setLinePoints(lineData.getItemLayout(idx));\n};\n\nlineProto.setLinePoints = function (points) {\n  var linePath = this.childOfName('line');\n  setLinePoints(linePath.shape, points);\n  linePath.dirty();\n};\n\nzrUtil.inherits(Line, graphic.Group);\nvar _default = Line;\nmodule.exports = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}