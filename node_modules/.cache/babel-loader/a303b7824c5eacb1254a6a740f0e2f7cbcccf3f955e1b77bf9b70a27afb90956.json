{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport OrdersApi from \"@/api/OrdersApi\";\nexport default {\n  name: \"HeritageManage\",\n  data() {\n    return {\n      pageSize: 10,\n      pageNum: 1,\n      total: 0,\n      search: '',\n      type: '',\n      fileList: [],\n      imgPre: 'http://localhost:8001/goodsImg/',\n      ordersData: [],\n      direction: 'rtl',\n      ordersDetail: []\n    };\n  },\n  methods: {\n    getFileList(goodsImg) {\n      if (goodsImg != null) {\n        let nameList = goodsImg.split('/');\n        let fileList = [];\n        for (const key in nameList) {\n          if (nameList[key] !== '') {\n            let imgList = {\n              name: nameList[key],\n              url: this.imgPre + nameList[key]\n            };\n            fileList.push(imgList);\n          }\n        }\n        this.fileList = fileList;\n      } else {\n        this.fileList = [];\n      }\n    },\n    openInformation(ordersID) {\n      OrdersApi.ordersDetail(ordersID).then(res => res.data).then(res => {\n        if (res.code === 200) {}\n      });\n    },\n    delHeritage(ordersID) {\n      OrdersApi.delOrders(ordersID).then(res => res.data).then(res => {\n        if (res.code === 200) {\n          this.searchOrders();\n          this.$notify({\n            title: '删除订单信息',\n            message: '删除订单信息成功',\n            type: 'success',\n            offset: 100\n          });\n        } else {\n          this.$notify({\n            title: '删除订单信息',\n            message: '删除订单信息失败',\n            type: 'error',\n            offset: 100\n          });\n        }\n      });\n    },\n    searchOrders() {\n      OrdersApi.searchOrders(this.pageSize, this.pageNum, this.type, this.search).then(res => res.data).then(res => {\n        this.ordersData = res.data;\n        this.total = res.total;\n      });\n    },\n    handleSizeChange(val) {\n      this.pageSize = val;\n    },\n    handleCurrentChange(val) {\n      this.pageNum = val;\n    },\n    resetData() {\n      this.search = '';\n      this.type = '';\n      this.searchOrders();\n    }\n  },\n  mounted() {\n    this.searchOrders();\n  }\n};","map":{"version":3,"names":["OrdersApi","name","data","pageSize","pageNum","total","search","type","fileList","imgPre","ordersData","direction","ordersDetail","methods","getFileList","goodsImg","nameList","split","key","imgList","url","push","openInformation","ordersID","then","res","code","delHeritage","delOrders","searchOrders","$notify","title","message","offset","handleSizeChange","val","handleCurrentChange","resetData","mounted"],"sources":["src/components/OrdersManage/OrdersManage.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"dataForm\">\r\n      <el-input class=\"input\" v-model=\"search\" placeholder=\"请输入内容\" size=\"small\">\r\n        <el-select v-model=\"type\" slot=\"prepend\" placeholder=\"请选择\">\r\n          <el-option label=\"订单编号\" value=\"订单编号\"></el-option>\r\n          <el-option label=\"订单状态\" value=\"订单编号\"></el-option>\r\n        </el-select>\r\n        <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"searchOrders\"></el-button>\r\n      </el-input>\r\n      <el-button class=\"btn\" size=\"small\" icon=\"el-icon-refresh\" @click=\"resetData\">重置</el-button>\r\n      <el-table\r\n          class=\"table\"\r\n          :data=\"ordersData\"\r\n          style=\"width: 100%;height: 400px\"\r\n          max-height=\"400px\">\r\n        <el-table-column\r\n            prop=\"heritageCity\"\r\n            label=\"所属市州\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"heritageName\"\r\n            label=\"非遗名称\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"非遗详情\">\r\n          <template v-slot=\"scope\">\r\n            <el-link type=\"primary\" :underline=\"false\" @click=\"openInformation(scope.row)\">查看<i class=\"el-icon-view el-icon--right\"></i></el-link>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"操作\">\r\n          <template v-slot=\"scope\">\r\n            <el-tooltip content=\"修改非遗信息\" placement=\"top\" effect=\"dark\">\r\n              <el-button icon=\"el-icon-edit\" plain size=\"mini\" @click=\"openUpdate(scope.row)\"></el-button>\r\n            </el-tooltip>\r\n            <el-tooltip content=\"删除非遗信息\" placement=\"top\" effect=\"dark\">\r\n              <el-button type=\"danger\" icon=\"el-icon-delete\" plain size=\"mini\" @click=\"delHeritage(scope.row)\"></el-button>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n          class=\"page\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"pageNum\"\r\n          :page-sizes=\"[10, 15, 20]\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\"\r\n      >\r\n      </el-pagination>\r\n\r\n      <el-drawer\r\n          title=\"非遗信息详情\"\r\n          :visible.sync=\"heritageInfDrawer\"\r\n          :direction=\"direction\">\r\n        <el-carousel height=\"200px\" style=\"margin: 10px\" indicator-position=\"outside\">\r\n          <el-carousel-item v-for=\"item in fileList\" :key=\"item.name\" >\r\n            <el-image :src=\"item.url\"></el-image>\r\n          </el-carousel-item>\r\n        </el-carousel>\r\n\r\n        <el-descriptions style=\"margin: 10px\" :column=\"1\" border>\r\n          <el-descriptions-item>\r\n            <template slot=\"label\">\r\n              <i class=\"el-icon-copy-document\"></i>\r\n              非遗名称\r\n            </template>\r\n            {{this.HeritageForm.heritageName}}\r\n          </el-descriptions-item>\r\n          <el-descriptions-item>\r\n            <template slot=\"label\">\r\n              <i class=\"el-icon-location-information\"></i>\r\n              所属市州\r\n            </template>\r\n            {{this.HeritageForm.heritageCity}}\r\n          </el-descriptions-item>\r\n          <el-descriptions-item>\r\n            <template slot=\"label\">\r\n              <i class=\"el-icon-guide\"></i>\r\n              非遗地址\r\n            </template>\r\n            {{ this.HeritageForm.heritageAddress }}\r\n          </el-descriptions-item>\r\n          <el-descriptions-item>\r\n            <template slot=\"label\">\r\n              <i class=\"el-icon-postcard\"></i>\r\n              非遗简介\r\n            </template>\r\n            {{this.HeritageForm.heritageDetail}}\r\n          </el-descriptions-item>\r\n        </el-descriptions>\r\n      </el-drawer>\r\n\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport OrdersApi from \"@/api/OrdersApi\";\r\n\r\nexport default {\r\n  name: \"HeritageManage\",\r\n  data(){\r\n    return{\r\n      pageSize:10,\r\n      pageNum:1,\r\n      total:0,\r\n      search:'',\r\n      type:'',\r\n      fileList:[],\r\n      imgPre:'http://localhost:8001/goodsImg/',\r\n      ordersData:[],\r\n      direction:'rtl',\r\n      ordersDetail: [],\r\n    }\r\n  },\r\n  methods:{\r\n\r\n    getFileList(goodsImg){\r\n      if (goodsImg!=null) {\r\n        let nameList = goodsImg.split('/')\r\n        let fileList = []\r\n        for (const key in nameList) {\r\n          if (nameList[key]!=='') {\r\n            let imgList = {name: nameList[key], url: this.imgPre + nameList[key]}\r\n            fileList.push(imgList)\r\n          }\r\n        }\r\n        this.fileList = fileList\r\n      }else {\r\n        this.fileList=[]\r\n      }\r\n    },\r\n    openInformation(ordersID){\r\n      OrdersApi.ordersDetail(ordersID).then(res=>res.data).then(res=>{\r\n        if (res.code===200){\r\n\r\n        }\r\n      })\r\n    },\r\n\r\n    delHeritage(ordersID){\r\n      OrdersApi.delOrders(ordersID).then(res=>res.data).then(res=>{\r\n        if (res.code===200){\r\n          this.searchOrders()\r\n          this.$notify({\r\n            title: '删除订单信息',\r\n            message: '删除订单信息成功',\r\n            type:'success',\r\n            offset: 100\r\n          });\r\n        }else {\r\n          this.$notify({\r\n            title: '删除订单信息',\r\n            message: '删除订单信息失败',\r\n            type:'error',\r\n            offset: 100\r\n          });\r\n        }\r\n      })\r\n    },\r\n\r\n    searchOrders(){\r\n      OrdersApi.searchOrders(this.pageSize,this.pageNum,this.type,this.search).then(res=>res.data).then(res=>{\r\n        this.ordersData=res.data\r\n        this.total=res.total\r\n      })\r\n    },\r\n    handleSizeChange(val) {\r\n      this.pageSize=val\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.pageNum=val\r\n    },\r\n    resetData(){\r\n      this.search=''\r\n      this.type=''\r\n      this.searchOrders()\r\n    },\r\n  },\r\n  mounted() {\r\n    this.searchOrders()\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.dataForm{\r\n  width: 800px;\r\n  height: 500px;\r\n  margin-top: 10px;\r\n  margin-left: 10px;\r\n  float: left;\r\n  padding: 10px;\r\n  background: rgba( 254, 252, 252, 0.8 );\r\n  border-radius: 15px;\r\n  border: 1px solid rgba( 255, 255, 255, 0.18 );\r\n}\r\n.el-upload-list__item.is-ready {\r\n  display: none;\r\n}\r\n.el-upload-list__item {\r\n  transition: none !important;\r\n}\r\n\r\n.el-carousel__item:nth-child(2n) {\r\n  background-color: #99a9bf;\r\n}\r\n\r\n.el-carousel__item:nth-child(2n+1) {\r\n  background-color: #d3dce6;\r\n}\r\n.el-select{\r\n  width: 90px;\r\n}\r\n.el-input{\r\n  width: 300px;\r\n  float: left;\r\n  opacity: 0.8;\r\n}\r\n.btn{\r\n  float: left;\r\n  margin-left: 7px;\r\n}\r\n.btn:hover{\r\n  background-color: rgba( 255, 255, 255, 0.3 );\r\n  transform: scale(1.1);\r\n  transition: all 0.6s;\r\n}\r\n.table{\r\n  margin-top: 20px;\r\n  float: left;\r\n}\r\n.page{\r\n  float: left;\r\n  background-color: rgba( 254, 252, 252, 0.8 );\r\n  opacity: 0.8;\r\n  margin-left: 150px;\r\n}\r\n\r\n</style>"],"mappings":";AAsGA,OAAAA,SAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,OAAA;MACAC,KAAA;MACAC,MAAA;MACAC,IAAA;MACAC,QAAA;MACAC,MAAA;MACAC,UAAA;MACAC,SAAA;MACAC,YAAA;IACA;EACA;EACAC,OAAA;IAEAC,YAAAC,QAAA;MACA,IAAAA,QAAA;QACA,IAAAC,QAAA,GAAAD,QAAA,CAAAE,KAAA;QACA,IAAAT,QAAA;QACA,WAAAU,GAAA,IAAAF,QAAA;UACA,IAAAA,QAAA,CAAAE,GAAA;YACA,IAAAC,OAAA;cAAAlB,IAAA,EAAAe,QAAA,CAAAE,GAAA;cAAAE,GAAA,OAAAX,MAAA,GAAAO,QAAA,CAAAE,GAAA;YAAA;YACAV,QAAA,CAAAa,IAAA,CAAAF,OAAA;UACA;QACA;QACA,KAAAX,QAAA,GAAAA,QAAA;MACA;QACA,KAAAA,QAAA;MACA;IACA;IACAc,gBAAAC,QAAA;MACAvB,SAAA,CAAAY,YAAA,CAAAW,QAAA,EAAAC,IAAA,CAAAC,GAAA,IAAAA,GAAA,CAAAvB,IAAA,EAAAsB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA,WAEA;MACA;IACA;IAEAC,YAAAJ,QAAA;MACAvB,SAAA,CAAA4B,SAAA,CAAAL,QAAA,EAAAC,IAAA,CAAAC,GAAA,IAAAA,GAAA,CAAAvB,IAAA,EAAAsB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAG,YAAA;UACA,KAAAC,OAAA;YACAC,KAAA;YACAC,OAAA;YACAzB,IAAA;YACA0B,MAAA;UACA;QACA;UACA,KAAAH,OAAA;YACAC,KAAA;YACAC,OAAA;YACAzB,IAAA;YACA0B,MAAA;UACA;QACA;MACA;IACA;IAEAJ,aAAA;MACA7B,SAAA,CAAA6B,YAAA,MAAA1B,QAAA,OAAAC,OAAA,OAAAG,IAAA,OAAAD,MAAA,EAAAkB,IAAA,CAAAC,GAAA,IAAAA,GAAA,CAAAvB,IAAA,EAAAsB,IAAA,CAAAC,GAAA;QACA,KAAAf,UAAA,GAAAe,GAAA,CAAAvB,IAAA;QACA,KAAAG,KAAA,GAAAoB,GAAA,CAAApB,KAAA;MACA;IACA;IACA6B,iBAAAC,GAAA;MACA,KAAAhC,QAAA,GAAAgC,GAAA;IACA;IACAC,oBAAAD,GAAA;MACA,KAAA/B,OAAA,GAAA+B,GAAA;IACA;IACAE,UAAA;MACA,KAAA/B,MAAA;MACA,KAAAC,IAAA;MACA,KAAAsB,YAAA;IACA;EACA;EACAS,QAAA;IACA,KAAAT,YAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}