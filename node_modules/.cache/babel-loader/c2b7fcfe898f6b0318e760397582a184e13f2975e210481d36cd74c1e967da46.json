{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport OrdersApi from \"@/api/OrdersApi\";\nexport default {\n  name: \"HeritageManage\",\n  data() {\n    return {\n      pageSize: 10,\n      pageNum: 1,\n      total: 0,\n      search: '',\n      type: '',\n      dynamicTags: [],\n      inputVisible: false,\n      inputValue: '',\n      fileList: [],\n      ordersInfDrawer: false,\n      imgPre: 'http://localhost:8001/goodsImg/',\n      ordersData: [],\n      direction: 'rtl',\n      goodsDetail: [],\n      ordersDetail: {\n        ordersID: '',\n        ordersDate: '',\n        ordersStatue: '',\n        ordersMoney: '',\n        userName: '',\n        name: '',\n        receiverAddress: ''\n      }\n    };\n  },\n  methods: {\n    handleClose(tag) {\n      this.dynamicTags.splice(this.dynamicTags.indexOf(tag), 1);\n    },\n    showInput() {\n      this.inputVisible = true;\n      this.$nextTick(() => {\n        this.$refs.saveTagInput.$refs.input.focus();\n      });\n    },\n    handleInputConfirm() {\n      let inputValue = this.inputValue;\n      if (inputValue) {\n        this.dynamicTags.push(inputValue);\n      }\n      this.inputVisible = false;\n      this.inputValue = '';\n    },\n    getImg(goodsDetail) {\n      for (const key in goodsDetail) {\n        if (goodsDetail[key].goodsImg != null) {\n          let nameList = goodsDetail[key].goodsImg.split('/');\n          goodsDetail[key].goodsImg = this.imgPre + nameList[0];\n        }\n      }\n    },\n    openInformation(orders) {\n      this.dynamicTags = [];\n      this.ordersInfDrawer = true;\n      this.ordersDetail.ordersID = orders.ordersID;\n      this.ordersDetail.ordersDate = orders.ordersDate;\n      this.ordersDetail.ordersStatue = orders.ordersStatue;\n      this.ordersDetail.ordersMoney = orders.ordersMoney;\n      OrdersApi.ordersDetail(orders.ordersID).then(res => res.data).then(res => {\n        if (res.code === 200) {\n          this.ordersDetail.name = res.data[0].name;\n          this.ordersDetail.userName = res.data[0].userName;\n          this.ordersDetail.receiverAddress = res.data[0].province + res.data[0].city + res.data[0].detailAddress;\n          this.goodsDetail = res.data;\n          this.dynamicTags.push(this.ordersDetail.ordersStatue);\n          this.getImg(this.goodsDetail);\n          console.log(this.goodsDetail);\n        }\n      });\n    },\n    delOrders(ordersID) {\n      console.log(ordersID);\n      OrdersApi.delOrders(ordersID).then(res => res.data).then(res => {\n        if (res.code === 200) {\n          this.searchOrders();\n          this.$notify({\n            title: '删除订单信息',\n            message: '删除订单信息成功',\n            type: 'success',\n            offset: 100\n          });\n        } else {\n          this.$notify({\n            title: '删除订单信息',\n            message: '删除订单信息失败',\n            type: 'error',\n            offset: 100\n          });\n        }\n      });\n    },\n    searchOrders() {\n      OrdersApi.searchOrders(this.pageSize, this.pageNum, this.type, this.search).then(res => res.data).then(res => {\n        this.ordersData = res.data;\n        this.total = res.total;\n      });\n    },\n    handleSizeChange(val) {\n      this.pageSize = val;\n    },\n    handleCurrentChange(val) {\n      this.pageNum = val;\n    },\n    resetData() {\n      this.search = '';\n      this.type = '';\n      this.searchOrders();\n    }\n  },\n  mounted() {\n    this.searchOrders();\n  }\n};","map":{"version":3,"names":["OrdersApi","name","data","pageSize","pageNum","total","search","type","dynamicTags","inputVisible","inputValue","fileList","ordersInfDrawer","imgPre","ordersData","direction","goodsDetail","ordersDetail","ordersID","ordersDate","ordersStatue","ordersMoney","userName","receiverAddress","methods","handleClose","tag","splice","indexOf","showInput","$nextTick","$refs","saveTagInput","input","focus","handleInputConfirm","push","getImg","key","goodsImg","nameList","split","openInformation","orders","then","res","code","province","city","detailAddress","console","log","delOrders","searchOrders","$notify","title","message","offset","handleSizeChange","val","handleCurrentChange","resetData","mounted"],"sources":["src/components/OrdersManage/OrdersManage.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"dataForm\">\r\n      <el-input class=\"input\" v-model=\"search\" placeholder=\"请输入内容\" size=\"small\">\r\n        <el-select v-model=\"type\" slot=\"prepend\" placeholder=\"请选择\">\r\n          <el-option label=\"订单编号\" value=\"订单编号\"></el-option>\r\n          <el-option label=\"订单状态\" value=\"订单状态\"></el-option>\r\n        </el-select>\r\n        <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"searchOrders\"></el-button>\r\n      </el-input>\r\n      <el-button class=\"btn\" size=\"small\" icon=\"el-icon-refresh\" @click=\"resetData\">重置</el-button>\r\n      <el-table\r\n          class=\"table\"\r\n          :data=\"ordersData\"\r\n          style=\"width: 100%;height: 400px\"\r\n          max-height=\"400px\">\r\n        <el-table-column\r\n            prop=\"ordersID\"\r\n            label=\"订单编号\"\r\n            :show-overflow-tooltip='true'\r\n        >\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"ordersDate\"\r\n            label=\"订单日期\"\r\n            :show-overflow-tooltip='true'>\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"ordersMoney\"\r\n            label=\"订单金额\"\r\n            :show-overflow-tooltip='true'>\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"订单状态\">\r\n          <template v-slot=\"scope\">\r\n          <el-tag type=\"success\" v-if=\"scope.row.ordersStatue==='已完成'\">已完成</el-tag>\r\n          <el-tag type=\"warning\" v-if=\"scope.row.ordersStatue==='运输中'\">运输中</el-tag>\r\n          <el-tag v-else>{{scope.row.ordersStatue}}</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"订单详情\">\r\n          <template v-slot=\"scope\">\r\n            <el-link type=\"primary\" :underline=\"false\" @click=\"openInformation(scope.row)\">查看<i class=\"el-icon-view el-icon--right\"></i></el-link>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"操作\">\r\n          <template v-slot=\"scope\">\r\n            <el-tooltip content=\"删除订单信息\" placement=\"top\" effect=\"dark\">\r\n              <el-button type=\"danger\" icon=\"el-icon-delete\" plain size=\"mini\" @click=\"delOrders(scope.row.ordersID)\"></el-button>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n          class=\"page\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"pageNum\"\r\n          :page-sizes=\"[10, 15, 20]\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\"\r\n      >\r\n      </el-pagination>\r\n\r\n      <el-drawer\r\n          title=\"订单详情\"\r\n          :visible.sync=\"ordersInfDrawer\"\r\n          :direction=\"direction\">\r\n        <el-descriptions style=\"padding: 10px\" :column=\"1\" border >\r\n          <el-descriptions-item>\r\n            <template slot=\"label\">\r\n              <i class=\"el-icon-s-order\"></i>\r\n              订单编号\r\n            </template>\r\n            {{ ordersDetail.ordersID }}\r\n          </el-descriptions-item>\r\n          <el-descriptions-item>\r\n            <template slot=\"label\">\r\n              <i class=\"el-icon-s-custom\"></i>\r\n              购买人\r\n            </template>\r\n            {{ ordersDetail.userName }}\r\n          </el-descriptions-item>\r\n          <el-descriptions-item>\r\n            <template slot=\"label\">\r\n              <i class=\"el-icon-user-solid\"></i>\r\n              收件人\r\n            </template>\r\n            {{ ordersDetail.name }}\r\n          </el-descriptions-item>\r\n          <el-descriptions-item>\r\n            <template slot=\"label\">\r\n              <i class=\"el-icon-location\"></i>\r\n              收件地址\r\n            </template>\r\n            {{ ordersDetail.receiverAddress }}\r\n          </el-descriptions-item>\r\n          <el-descriptions-item>\r\n            <template slot=\"label\">\r\n              <i class=\"el-icon-timer\"></i>\r\n              下订时间\r\n            </template>\r\n            {{ ordersDetail.ordersDate }}\r\n          </el-descriptions-item>\r\n          <el-descriptions-item>\r\n            <template slot=\"label\">\r\n              <i class=\"el-icon-message-solid\"></i>\r\n              订单状态\r\n            </template>\r\n\r\n            <el-tag\r\n                :key=\"tag\"\r\n                v-for=\"tag in dynamicTags\"\r\n                closable\r\n                @close=\"handleClose(tag)\"\r\n                :disable-transitions=\"false\">\r\n              {{ ordersDetail.ordersStatue }}\r\n            </el-tag>\r\n            <el-input\r\n                class=\"input-new-tag\"\r\n                v-if=\"inputVisible\"\r\n                v-model=\"inputValue\"\r\n                ref=\"saveTagInput\"\r\n                size=\"small\"\r\n                style=\"width: 30px\"\r\n                @keyup.enter.native=\"handleInputConfirm\"\r\n                @blur=\"handleInputConfirm\"\r\n            >\r\n            </el-input>\r\n            <el-button v-else class=\"button-new-tag\" size=\"small\" @click=\"showInput\">+ New Tag</el-button>\r\n\r\n          </el-descriptions-item>\r\n        </el-descriptions>\r\n        <el-card :body-style=\"{ padding: '10px' }\" style=\"margin-left: 10px;margin-right: 10px\">\r\n          <div slot=\"header\">\r\n            <span>商品列表</span>\r\n          </div>\r\n          <el-card :body-style=\"{ padding: '0px' }\" style=\"margin-bottom: 10px\" v-for=\"item in goodsDetail\" :key=\"item.length\">\r\n            <div style=\"width: 100%;height: 130px;text-align: left\">\r\n            <el-image :src=\"item.goodsImg\" style=\"width: 40%;height: 120px;float: left;margin: 5px 10px 5px 5px\"/>\r\n              <div style=\"margin:10px 0 8px 0\">\r\n                <span style=\"font-weight: bold\">{{item.goodsName}}</span>\r\n                <span style=\"float: right;margin-right: 20px\"><el-tag type=\"info\" size=\"mini\">×{{item.goodsNumber}}</el-tag></span>\r\n              </div>\r\n              <div>\r\n                <span style=\"color:#999;font-size: 13px;\">{{ item.goodsCategory }};{{item.goodsLocation}}</span>\r\n              </div>\r\n              <div style=\"margin-top: 58px\">\r\n                <span style=\"font-weight: bold;color: coral\" >￥{{ item.goodsTotal }}</span>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n\r\n        </el-card>\r\n      </el-drawer>\r\n\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport OrdersApi from \"@/api/OrdersApi\";\r\n\r\nexport default {\r\n  name: \"HeritageManage\",\r\n  data(){\r\n    return{\r\n      pageSize:10,\r\n      pageNum:1,\r\n      total:0,\r\n      search:'',\r\n      type:'',\r\n      dynamicTags: [],\r\n      inputVisible: false,\r\n      inputValue: '',\r\n      fileList:[],\r\n      ordersInfDrawer:false,\r\n      imgPre:'http://localhost:8001/goodsImg/',\r\n      ordersData:[],\r\n      direction:'rtl',\r\n      goodsDetail: [],\r\n      ordersDetail: {\r\n        ordersID:'',\r\n        ordersDate:'',\r\n        ordersStatue:'',\r\n        ordersMoney:'',\r\n        userName: '',\r\n        name:'',\r\n        receiverAddress:''\r\n      },\r\n    }\r\n  },\r\n  methods:{\r\n    handleClose(tag) {\r\n      this.dynamicTags.splice(this.dynamicTags.indexOf(tag), 1);\r\n    },\r\n\r\n    showInput() {\r\n      this.inputVisible = true;\r\n      this.$nextTick(() => {\r\n        this.$refs.saveTagInput.$refs.input.focus();\r\n      });\r\n    },\r\n\r\n    handleInputConfirm() {\r\n      let inputValue = this.inputValue;\r\n      if (inputValue) {\r\n        this.dynamicTags.push(inputValue);\r\n      }\r\n      this.inputVisible = false;\r\n      this.inputValue = '';\r\n    },\r\n\r\n    getImg(goodsDetail){\r\n      for (const key in goodsDetail){\r\n        if (goodsDetail[key].goodsImg!=null) {\r\n          let nameList = goodsDetail[key].goodsImg.split('/')\r\n          goodsDetail[key].goodsImg=this.imgPre+nameList[0]\r\n        }\r\n      }\r\n    },\r\n    openInformation(orders){\r\n      this.dynamicTags=[]\r\n      this.ordersInfDrawer=true\r\n      this.ordersDetail.ordersID=orders.ordersID\r\n      this.ordersDetail.ordersDate=orders.ordersDate\r\n      this.ordersDetail.ordersStatue=orders.ordersStatue\r\n      this.ordersDetail.ordersMoney=orders.ordersMoney\r\n      OrdersApi.ordersDetail(orders.ordersID).then(res=>res.data).then(res=>{\r\n        if (res.code===200){\r\n          this.ordersDetail.name=res.data[0].name\r\n          this.ordersDetail.userName=res.data[0].userName\r\n          this.ordersDetail.receiverAddress=res.data[0].province+res.data[0].city+res.data[0].detailAddress\r\n          this.goodsDetail=res.data\r\n          this.dynamicTags.push(this.ordersDetail.ordersStatue)\r\n          this.getImg(this.goodsDetail)\r\n          console.log(this.goodsDetail)\r\n        }\r\n      })\r\n    },\r\n    delOrders(ordersID){\r\n      console.log(ordersID)\r\n      OrdersApi.delOrders(ordersID).then(res=>res.data).then(res=>{\r\n        if (res.code===200){\r\n          this.searchOrders()\r\n          this.$notify({\r\n            title: '删除订单信息',\r\n            message: '删除订单信息成功',\r\n            type:'success',\r\n            offset: 100\r\n          });\r\n        }else {\r\n          this.$notify({\r\n            title: '删除订单信息',\r\n            message: '删除订单信息失败',\r\n            type:'error',\r\n            offset: 100\r\n          });\r\n        }\r\n      })\r\n    },\r\n    searchOrders(){\r\n      OrdersApi.searchOrders(this.pageSize,this.pageNum,this.type,this.search).then(res=>res.data).then(res=>{\r\n        this.ordersData=res.data\r\n        this.total=res.total\r\n      })\r\n    },\r\n    handleSizeChange(val) {\r\n      this.pageSize=val\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.pageNum=val\r\n    },\r\n    resetData(){\r\n      this.search=''\r\n      this.type=''\r\n      this.searchOrders()\r\n    },\r\n  },\r\n  mounted() {\r\n    this.searchOrders()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.dataForm{\r\n  width: 800px;\r\n  height: 500px;\r\n  margin-top: 10px;\r\n  margin-left: 10px;\r\n  float: left;\r\n  padding: 10px;\r\n  background: rgba( 254, 252, 252, 0.8 );\r\n  border-radius: 15px;\r\n  border: 1px solid rgba( 255, 255, 255, 0.18 );\r\n}\r\n.el-tag.is-ready {\r\n  display: none;\r\n}\r\n.el-tag {\r\n  transition: none !important;\r\n}\r\n.el-tag + .el-tag {\r\n  margin-left: 10px;\r\n}\r\n.button-new-tag {\r\n  margin-left: 10px;\r\n  height: 32px;\r\n  line-height: 30px;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n}\r\n.input-new-tag {\r\n  width: 20px;\r\n  margin-left: 10px;\r\n  vertical-align: bottom;\r\n}\r\n.el-upload-list__item.is-ready {\r\n  display: none;\r\n}\r\n.el-upload-list__item {\r\n  transition: none !important;\r\n}\r\n\r\n.el-carousel__item:nth-child(2n) {\r\n  background-color: #99a9bf;\r\n}\r\n\r\n.el-carousel__item:nth-child(2n+1) {\r\n  background-color: #d3dce6;\r\n}\r\n.el-select{\r\n  width: 90px;\r\n}\r\n.el-input{\r\n  width: 300px;\r\n  float: left;\r\n  opacity: 0.8;\r\n}\r\n.btn{\r\n  float: left;\r\n  margin-left: 7px;\r\n}\r\n.btn:hover{\r\n  background-color: rgba( 255, 255, 255, 0.3 );\r\n  transform: scale(1.1);\r\n  transition: all 0.6s;\r\n}\r\n.table{\r\n  margin-top: 20px;\r\n  float: left;\r\n}\r\n.page{\r\n  float: left;\r\n  background-color: rgba( 254, 252, 252, 0.8 );\r\n  opacity: 0.8;\r\n  margin-left: 150px;\r\n}\r\n\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}